#include <iostream>
using namespace std;

int main() {
    char repeat;

    do {
        int numCard;

        // Input the number of cards
        cout << "Enter your number of cards from 2 - 5: ";
        cin >> numCard;

        // Check if the number of cards is valid
        while (numCard < 2 || numCard > 5) {
            cout << "Invalid number. Please enter between 2 and 5: ";
            cin >> numCard;
        }
        
        int score = 0;
        int numAces = 0;
        int i = 0;

        cout << "Enter the values of your cards. Enter 2-9, t for 10, j for Jack, q for Queen, k for King, and a for Ace." << endl;

        // Loop to input card values
        while (i < numCard) {
            char cardValue;
            cin >> cardValue;

            if (cardValue >= '2' && cardValue <= '9') {
                
                score += cardValue - '0';
                i++; // Move to the next card
            } else if (cardValue == 't' || cardValue == 'T' || cardValue == 'j' || cardValue == 'J' || 
                       cardValue == 'q' || cardValue == 'Q' || cardValue == 'k' || cardValue == 'K') {
                // Handle face cards (10, Jack, Queen, King)
                score += 10;
                i++; // Move to the next card
            } else if (cardValue == 'a' || cardValue == 'A') {
                // Handle Ace
                score += 11;
                numAces++;
                i++; // Move to the next card
            } else {
                // Invalid input
                cout << "Invalid card value. Please enter a valid card." << endl;
                // Do not increment `i` so the user re-enters this card
            }
        }
        
        // Adjust score for Aces if the score is over 21
        while (score > 21 && numAces > 0) {
            score -= 10;
            numAces--;
        }

        // Determine if the score is a bust or valid
        if (score > 21) {
            cout << "You got BUSTED with a score of " << score << "." << endl;
        } else if (score == 21) {
            cout << "Congratulations! You hit the perfect score of 21!" << endl;
        } else {
            cout << "Your score is " << score << "." << endl;
        }

        // Ask if the user wants to play another game
        cout << "Do you want to play another game? (y/n): ";
        cin >> repeat;

    } while (repeat == 'y' || repeat == 'Y');

    return 0;
}
